<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·å–æœ€è¿‘æ–‡æ¡£åˆ—è¡¨ (getRecentDocs)</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <h1>è·å–æœ€è¿‘æ–‡æ¡£åˆ—è¡¨ (getRecentDocs)</h1>
        <p class="api-path">POST /api/storage/getRecentDocs</p>

        <h2 id="è®¤è¯ä¸æƒé™">è®¤è¯ä¸æƒé™</h2>
        <p>éœ€è¦èº«ä»½éªŒè¯ (é€šè¿‡ API Token)ã€‚</p>

        <h2 id="æ¥å£æè¿°">æ¥å£æè¿°</h2>
        <p>æ­¤æ¥å£ç”¨äºè·å–ç”¨æˆ·æœ€è¿‘æ‰“å¼€æˆ–ç¼–è¾‘çš„æ–‡æ¡£åˆ—è¡¨ã€‚åˆ—è¡¨æœ€å¤šåŒ…å« 32 æ¡è®°å½•ï¼Œå¹¶æŒ‰æœ€è¿‘è®¿é—®é¡ºåºåˆ—å‡ºã€‚</p>
        <p>æ•°æ®æ¥æºäºå†…æ ¸ç»´æŠ¤çš„ <code>data/storage/recent-doc.json</code> æ–‡ä»¶ï¼Œå¹¶åœ¨è¿”å›å‰ä¼šå°è¯•æ›´æ–°æ–‡æ¡£æ ‡é¢˜ä»¥åæ˜ æœ€æ–°çŠ¶æ€ã€‚</p>

        <h2 id="è¯·æ±‚ä½“å‚æ•°">è¯·æ±‚ä½“å‚æ•°</h2>
        <p>è¯¥æ¥å£ä¸éœ€è¦è¯·æ±‚ä½“å‚æ•°ã€‚</p>

        <h2 id="è¯·æ±‚ä½“ç¤ºä¾‹">è¯·æ±‚ä½“ç¤ºä¾‹</h2>
        <pre><code class="language-json">
{}
        </code></pre>

        <h2 id="å“åº”ä½“è¯´æ˜">å“åº”ä½“è¯´æ˜</h2>
        <p>æˆåŠŸæ—¶ï¼Œæ¥å£è¿”å›ä¸€ä¸ª JSON æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ªæœ€è¿‘è®¿é—®çš„æ–‡æ¡£å¯¹è±¡ã€‚æ¯ä¸ªå¯¹è±¡åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
        <table>
            <thead>
                <tr>
                    <th>å­—æ®µå</th>
                    <th>ç±»å‹</th>
                    <th>æè¿°</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>rootID</td>
                    <td>string</td>
                    <td>æ–‡æ¡£æ ¹å—çš„ IDã€‚</td>
                </tr>
                <tr>
                    <td>icon</td>
                    <td>string</td>
                    <td>æ–‡æ¡£çš„å›¾æ ‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª Emoji å­—ç¬¦æˆ–å›¾ç‰‡èµ„æºçš„è·¯å¾„ã€‚</td>
                </tr>
                <tr>
                    <td>title</td>
                    <td>string</td>
                    <td>æ–‡æ¡£çš„æ ‡é¢˜ã€‚æ¥å£ä¼šå°è¯•è¿”å›æœ€æ–°çš„æ ‡é¢˜ã€‚</td>
                </tr>
            </tbody>
        </table>

        <h2 id="å“åº”ä½“ç¤ºä¾‹">å“åº”ä½“ç¤ºä¾‹</h2>
        <pre><code class="language-json">
[
    {
        "rootID": "20230101000000-abcdefgh",
        "icon": "",
        "title": "æˆ‘æœ€è¿‘çœ‹çš„ç¬¬ä¸€ç¯‡æ–‡æ¡£"
    },
    {
        "rootID": "20230215102030-ijklmnop",
        "icon": "ğŸ’¡",
        "title": "ä¸€äº›æœ‰è¶£çš„æƒ³æ³•è®°å½•"
    },
    {
        "rootID": "20221225080000-qrstuvwx",
        "icon": "assets/custom-icon-image.png",
        "title": "é¡¹ç›®è®¡åˆ’ä¹¦ V3"
    }
    // ... æœ€å¤š 32 æ¡è®°å½•
]
        </code></pre>

        <h2 id="cURLè°ƒç”¨ç¤ºä¾‹">cURL è°ƒç”¨ç¤ºä¾‹</h2>
        <pre><code class="language-bash">
curl -X POST \
  http://127.0.0.1:6806/api/storage/getRecentDocs \
  -H 'Authorization: Token YOUR_API_TOKEN' \
  -H 'Content-Type: application/json'
        </code></pre>

        <h2 id="JavaScriptè°ƒç”¨ç¤ºä¾‹">JavaScript è°ƒç”¨ç¤ºä¾‹</h2>
        <pre><code class="language-javascript">
async function getSiyuanRecentDocs() {
    try {
        const response = await fetch('/api/storage/getRecentDocs', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Token YOUR_API_TOKEN' // å¦‚æœé…ç½®äº†API Token
            }
        });
        if (!response.ok) {
            const errorData = await response.json();
            console.error('è·å–æœ€è¿‘æ–‡æ¡£åˆ—è¡¨å¤±è´¥:', response.status, errorData);
            document.getElementById('apiResponse').textContent = `é”™è¯¯ ${response.status}: ${JSON.stringify(errorData, null, 2)}`;
            return null;
        }
        const data = await response.json();
        console.log('æœ€è¿‘æ–‡æ¡£åˆ—è¡¨:', data);
        document.getElementById('apiResponse').textContent = JSON.stringify(data, null, 2);
        return data;
    } catch (error) {
        console.error('è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error);
        document.getElementById('apiResponse').textContent = `è¯·æ±‚é”™è¯¯: ${error.message}`;
        return null;
    }
}
        </code></pre>

        <h2 id="åœ¨çº¿æµ‹è¯•">åœ¨çº¿æµ‹è¯•</h2>
        <div class="controls">
            <button onclick="getSiyuanRecentDocs()">è·å–æœ€è¿‘æ–‡æ¡£åˆ—è¡¨</button>
        </div>
        <h3>å“åº”:</h3>
        <pre id="apiResponse">ç‚¹å‡»æŒ‰é’®åï¼Œæ­¤å¤„å°†æ˜¾ç¤ºAPIçš„å“åº”ç»“æœã€‚</pre>
    </div>
    <script src="../js/scripts.js"></script>
    <script>
        // ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå¦‚æœlocalStorageä¸­æœ‰tokenï¼Œåˆ™è‡ªåŠ¨å¡«å……
        const storedToken = localStorage.getItem('siyuanApiToken');
        if (storedToken) {
            const jsExampleElement = document.querySelector('code.language-javascript');
            if (jsExampleElement) {
                jsExampleElement.textContent = jsExampleElement.textContent.replace('YOUR_API_TOKEN', storedToken);
            }
            const curlExampleElement = document.querySelector('code.language-bash');
            if (curlExampleElement) {
                curlExampleElement.textContent = curlExampleElement.textContent.replace('YOUR_API_TOKEN', storedToken);
            }
        }
    </script>
</body>
</html> 